<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <title>영양제 등록</title>
</head>
<body>
    <div class="top-bar">
        <div class="top-left"><a th:href="@{/}">홈</a></div>
    </div>
        
    <h1>영양제 등록</h1>
    
    <div class="center-box">
        <a th:href="@{/supplements/list}" class="custom-btn btn-gray btn-sm">← 목록으로 돌아가기</a>
    </div>

    <div class="card-box" style="margin-top: 20px;">
        <form th:object="${supplementForm}"
              th:action="${supplementForm.id} == null ? @{/supplements} : @{/supplements/{id}/edit(id=${supplementForm.id})}"
              method="post" enctype="multipart/form-data">

            <input type="hidden" th:field="*{id}" />
            <input type="hidden" th:field="*{memberId}" />

            <div class="form-row">
                <label>영양제 이름</label>
                <input type="text" th:field="*{name}" placeholder="예: 비타민C 1000mg"/>
                <div th:if="${nameError}" style="color:red; font-size:13px;" th:text="${nameError}"></div>
            </div>

            <div class="form-row">
                <label>브랜드</label>
                <input type="text" th:field="*{brand}" placeholder="브랜드명"/>
            </div>

            <div class="form-row">
                <label>태그 선택</label>
                <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <label th:each="tagOpt : ${tagOptions}" style="font-weight: normal; font-size: 14px; cursor: pointer;">
                        <input type="checkbox" th:value="${tagOpt}" th:field="*{tagCodes}" style="width: auto;"/>
                        <span th:text="${tagOpt}"></span>
                    </label>
                </div>
            </div>

            <div class="form-row">
                <label>사진</label>
                <input type="file" th:field="*{imageFile}" accept="image/*"
                       style="border: none; padding-left: 0;">
            </div>

            <div class="form-row">
                <label>메모</label>
                <textarea th:field="*{memo}" rows="4" placeholder="섭취 목적 등 메모"></textarea>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button type="submit" class="custom-btn"
                        th:text="*{id} == null ? '등록하기' : '수정하기'">등록</button>
                <button type="reset" class="custom-btn btn-gray">초기화</button>
            </div>
        </form>
    </div>
</body>
</html>
